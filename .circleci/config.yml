version: 2
jobs:
  build:
    docker:
      - image: gcc:latest

    steps:
      - checkout

      - run:
          name: Install
          command: add-apt-repository universe
          command: apt update
          command: apt install cmocka

      - run:
          name: Build
          command: make -B

      - run:
          name: Memory
          command: make leaktest -B


      - run:
          name: Test
          command: make test -B